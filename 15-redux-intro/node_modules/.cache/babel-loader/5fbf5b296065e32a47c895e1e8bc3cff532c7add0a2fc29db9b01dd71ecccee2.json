{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  balance: 0,\n  loan: 0,\n  loanPurpose: \"\",\n  isLoading: false\n};\nconst accountSlice = createSlice({\n  name: \"account\",\n  initialState,\n  reducers: {\n    deposit(state, action) {\n      state.balance += action.payload;\n    },\n    withdraw(state, action) {\n      state.balance -= action.payload;\n    },\n    requestLoan: {\n      prepare(amount, purpose) {\n        return {\n          payload: {\n            amount,\n            purpose\n          }\n        };\n      },\n      reducer(state, action) {\n        if (state.loan > 0) return;\n        state.loan = action.payload.amount;\n        state.loanPurpose = action.payload.purpose;\n        state.balance = state.balance + action.payload.amount;\n      }\n    },\n    payLoan(state, action) {\n      state.balance -= state.loan;\n      state.loan = 0;\n      state.loanPurpose = \"\";\n    }\n  }\n});\nexport const {\n  deposit,\n  withdraw,\n  requestLoan,\n  payLoan\n} = accountSlice.actions;\nexport default accountSlice.reducer;\n\n// export default function accountReducer(state = initialStateAccount, action) {\n//   switch (action.type) {\n//     case \"account/deposit\":\n//       return {\n//         ...state,\n//         balance: state.balance + action.payload,\n//         isLoading: false,\n//       };\n//     case \"account/withdraw\":\n//       return { ...state, balance: state.balance - action.payload };\n//     case \"account/requestLoan\":\n//       if (state.loan > 0) return state;\n//       return {\n//         ...state,\n//         loan: action.payload.amount,\n//         loanPurpose: action.payload.purpose,\n//         balance: state.balance + action.payload.amount,\n//       };\n//     case \"account/payLoan\":\n//       return {\n//         ...state,\n//         loan: 0,\n//         loanPurpose: \"\",\n//         balance: state.balance - state.loan,\n//       };\n//     case \"account/convertingCurrency\":\n//       return {\n//         ...state,\n//         isLoading: true,\n//       };\n\n//     default:\n//       return state;\n//   }\n// }\n\n// export function deposit(amount, currency) {\n//   if (currency === \"USD\") return { type: \"account/deposit\", payload: amount };\n\n//   return async function (dispatch, getState) {\n//     dispatch({ type: \"account/convertingCurrency\" });\n//     //Api call\n\n//     const res = await fetch(\n//       `https://api.frankfurter.dev/v1/latest?base=${currency}&symbols=USD`\n//     );\n//     const data = await res.json();\n//     const convertedAmount = (amount * data.rates[\"USD\"]).toFixed(2);\n\n//     // return action\n//     dispatch({ type: \"account/deposit\", payload: convertedAmount });\n//   };\n// }\n// export function withdraw(amount) {\n//   return { type: \"account/withdraw\", payload: amount };\n// }\n// export function requestLoan(amount, purpose) {\n//   return {\n//     type: \"account/requestLoan\",\n//     payload: { amount, purpose },\n//   };\n// }\n// export function payLoan() {\n//   return { type: \"account/payLoan\" };\n// }","map":{"version":3,"names":["createSlice","initialState","balance","loan","loanPurpose","isLoading","accountSlice","name","reducers","deposit","state","action","payload","withdraw","requestLoan","prepare","amount","purpose","reducer","payLoan","actions"],"sources":["/home/idenev/workspace/Ultimate React Course/project/15-redux-intro/src/features/accounts/accountSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  balance: 0,\n  loan: 0,\n  loanPurpose: \"\",\n  isLoading: false,\n};\n\nconst accountSlice = createSlice({\n  name: \"account\",\n  initialState,\n  reducers: {\n    deposit(state, action) {\n      state.balance += action.payload;\n    },\n    withdraw(state, action) {\n      state.balance -= action.payload;\n    },\n    requestLoan: {\n      prepare(amount, purpose) {\n        return {\n          payload: { amount, purpose },\n        };\n      },\n\n      reducer(state, action) {\n        if (state.loan > 0) return;\n\n        state.loan = action.payload.amount;\n        state.loanPurpose = action.payload.purpose;\n        state.balance = state.balance + action.payload.amount;\n      },\n    },\n    payLoan(state, action) {\n      state.balance -= state.loan;\n      state.loan = 0;\n      state.loanPurpose = \"\";\n    },\n  },\n});\n\nexport const { deposit, withdraw, requestLoan, payLoan } = accountSlice.actions;\nexport default accountSlice.reducer;\n\n// export default function accountReducer(state = initialStateAccount, action) {\n//   switch (action.type) {\n//     case \"account/deposit\":\n//       return {\n//         ...state,\n//         balance: state.balance + action.payload,\n//         isLoading: false,\n//       };\n//     case \"account/withdraw\":\n//       return { ...state, balance: state.balance - action.payload };\n//     case \"account/requestLoan\":\n//       if (state.loan > 0) return state;\n//       return {\n//         ...state,\n//         loan: action.payload.amount,\n//         loanPurpose: action.payload.purpose,\n//         balance: state.balance + action.payload.amount,\n//       };\n//     case \"account/payLoan\":\n//       return {\n//         ...state,\n//         loan: 0,\n//         loanPurpose: \"\",\n//         balance: state.balance - state.loan,\n//       };\n//     case \"account/convertingCurrency\":\n//       return {\n//         ...state,\n//         isLoading: true,\n//       };\n\n//     default:\n//       return state;\n//   }\n// }\n\n// export function deposit(amount, currency) {\n//   if (currency === \"USD\") return { type: \"account/deposit\", payload: amount };\n\n//   return async function (dispatch, getState) {\n//     dispatch({ type: \"account/convertingCurrency\" });\n//     //Api call\n\n//     const res = await fetch(\n//       `https://api.frankfurter.dev/v1/latest?base=${currency}&symbols=USD`\n//     );\n//     const data = await res.json();\n//     const convertedAmount = (amount * data.rates[\"USD\"]).toFixed(2);\n\n//     // return action\n//     dispatch({ type: \"account/deposit\", payload: convertedAmount });\n//   };\n// }\n// export function withdraw(amount) {\n//   return { type: \"account/withdraw\", payload: amount };\n// }\n// export function requestLoan(amount, purpose) {\n//   return {\n//     type: \"account/requestLoan\",\n//     payload: { amount, purpose },\n//   };\n// }\n// export function payLoan() {\n//   return { type: \"account/payLoan\" };\n// }\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,YAAY,GAAG;EACnBC,OAAO,EAAE,CAAC;EACVC,IAAI,EAAE,CAAC;EACPC,WAAW,EAAE,EAAE;EACfC,SAAS,EAAE;AACb,CAAC;AAED,MAAMC,YAAY,GAAGN,WAAW,CAAC;EAC/BO,IAAI,EAAE,SAAS;EACfN,YAAY;EACZO,QAAQ,EAAE;IACRC,OAAOA,CAACC,KAAK,EAAEC,MAAM,EAAE;MACrBD,KAAK,CAACR,OAAO,IAAIS,MAAM,CAACC,OAAO;IACjC,CAAC;IACDC,QAAQA,CAACH,KAAK,EAAEC,MAAM,EAAE;MACtBD,KAAK,CAACR,OAAO,IAAIS,MAAM,CAACC,OAAO;IACjC,CAAC;IACDE,WAAW,EAAE;MACXC,OAAOA,CAACC,MAAM,EAAEC,OAAO,EAAE;QACvB,OAAO;UACLL,OAAO,EAAE;YAAEI,MAAM;YAAEC;UAAQ;QAC7B,CAAC;MACH,CAAC;MAEDC,OAAOA,CAACR,KAAK,EAAEC,MAAM,EAAE;QACrB,IAAID,KAAK,CAACP,IAAI,GAAG,CAAC,EAAE;QAEpBO,KAAK,CAACP,IAAI,GAAGQ,MAAM,CAACC,OAAO,CAACI,MAAM;QAClCN,KAAK,CAACN,WAAW,GAAGO,MAAM,CAACC,OAAO,CAACK,OAAO;QAC1CP,KAAK,CAACR,OAAO,GAAGQ,KAAK,CAACR,OAAO,GAAGS,MAAM,CAACC,OAAO,CAACI,MAAM;MACvD;IACF,CAAC;IACDG,OAAOA,CAACT,KAAK,EAAEC,MAAM,EAAE;MACrBD,KAAK,CAACR,OAAO,IAAIQ,KAAK,CAACP,IAAI;MAC3BO,KAAK,CAACP,IAAI,GAAG,CAAC;MACdO,KAAK,CAACN,WAAW,GAAG,EAAE;IACxB;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEK,OAAO;EAAEI,QAAQ;EAAEC,WAAW;EAAEK;AAAQ,CAAC,GAAGb,YAAY,CAACc,OAAO;AAC/E,eAAed,YAAY,CAACY,OAAO;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}